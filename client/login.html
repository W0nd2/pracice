<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="login.css">
    <title>Login</title>
</head>

<body>
    <!-- HEADER -->

    <div class="header">
        <div class="header-logo">
            <a href="index.html">
                <img class="header-logo_pic" src="./pic/st.jpg" alt="Header logo">
            </a>
        </div>
        <div class="header-title">
            <ul class="header-title-txt">
                <li class="header-title_registratin"><a href="registration.html"> Registration</a> </li>
                <li class="header-title_login"><a href="login.html">Login</a></li>
                <li class="header-title_profile"><a href="profile.html"> Profile </a></li>
            </ul>
        </div>
    </div>

    <!-- BODY -->

    <div class="body">
        <div class="login">
            <span class="login-txt">Email</span>
            <input id="login-email" type="text" placeholder="test@test.com">
            <span class="login-txt">Password</span>
            <input id="login-password" type="password" placeholder="password">
            <button id="login-button" onclick="sendRequest()">Подтвердить</button>
        </div>
    </div>

    <!-- FOOTER -->

    <div class="footer">

    </div>

    <!-- SCRIPT -->
    <script>
        const requestURL = 'http://localhost:5000/api/auth/login'

        function sendRequest(method, url) {
            let lgEmail = document.getElementById('login-email').value
            let lgPassword = document.getElementById('login-password').value
            //console.log(body)
            return new Promise((resolve, reject) => {
                const xhr = new XMLHttpRequest()

                xhr.open('POST', requestURL)

                xhr.responseType = 'json'
                
                xhr.setRequestHeader("Content-type", "application/json");

                const body = {
                    email:lgEmail,
                    password:lgPassword
                }
                console.log(body)
                xhr.send(JSON.stringify(body))

                xhr.onload = () => {
                    // if (xhr.status >= 400) {
                    //     reject(xhr.response)
                    // }
                    // else {
                    //     resolve(xhr.response)
                    // }
                    console.log(xhr.response)
                }

                xhr.onerror = () => {
                    reject(xhr.response)
                }
            })

        }
        //dedmoroz1472002@gmail.com
        // sendRequest("POST", requestURL)
        // .then( data => console.log(data))
        // .catch(err => console.log(error))
    </script>
</body>

</html>